import { gsap } from "gsap";
import { useGSAP } from "@gsap/react";
import { useRef } from "react";
const flowerSVG = (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="208"
    height="206"
    viewBox="0 0 208 206"
    fill="none"
  >
    <path
      d="M149.89 8.83068C161.138 8.19572 170.371 11.3868 177.59 18.404C180.853 21.3134 183.408 24.3659 185.253 27.5617C188.02 32.3552 189.419 36.6073 189.45 40.3179C189.481 44.0286 189.611 46.0836 189.842 46.4831L190.032 59.1562L180.379 67.1259L170.975 74.1534C167.807 75.9822 162.362 80.7238 154.64 88.3782C162.85 91.6271 169.858 93.7064 175.662 94.6161L186.94 97.6918L198.565 101.367L203.604 112.838C208.512 122.254 208.737 132.244 204.278 142.808C201.041 150.003 196.057 155.544 189.326 159.43C185.367 161.716 182.282 163.23 180.072 163.974L168.839 166.464L158.899 160.219L149.552 153.632C141.838 148.499 135.755 144.82 131.303 142.597C130.738 149.847 130.684 157.069 131.141 164.261L132.173 175.65L132.115 189.265L122.117 196.635C119.411 199.263 117.266 201.034 115.682 201.948C110.139 205.149 102.931 206.38 94.0592 205.644C84.0994 203.937 75.5601 198.748 68.4412 190.075L61.0264 179.975L64.2499 167.728C66.2335 160.192 67.2254 156.423 67.2254 156.423C69.3397 150.942 71.0428 143.833 72.3346 135.098C62.4708 138.13 55.7572 140.674 52.1938 142.732L41.9994 147.02L30.2712 151.394L19.3909 144.893C19.1603 144.494 17.4459 143.353 14.2477 141.471C11.0496 139.589 8.06671 136.251 5.29914 131.458C3.45409 128.262 2.08764 124.524 1.19978 120.243C-1.49846 110.083 0.354566 100.491 6.75887 91.4676L13.1479 80.5886L26.9517 79.8093L38.6278 79.4595C43.971 79.5703 50.8979 78.7668 59.4086 77.0489C53.9387 68.4892 49.6874 62.9545 46.6546 60.4445L38.9918 51.2869L31.231 40.588L34.4544 28.3408C35.6116 23.9444 37.1973 19.8332 39.2117 16.0071C41.622 11.9524 45.7966 8.21063 51.7357 4.78171C60.4463 -0.247365 70.1275 -1.30951 80.7791 1.59528L92.9972 4.92723L98.3824 16.9977L102.482 28.2127C106.137 37.2873 108.92 43.9361 110.83 48.1594C117.3 40.1632 121.542 34.252 123.556 30.426C124.448 28.3132 126.297 25.1152 129.103 20.8319L137.274 8.92422L149.89 8.83068Z"
      fill="white"
    />
    <path
      d="M149.89 8.83068C161.138 8.19572 170.371 11.3868 177.59 18.404C180.853 21.3134 183.408 24.3659 185.253 27.5617C188.02 32.3552 189.419 36.6073 189.45 40.3179C189.481 44.0286 189.611 46.0836 189.842 46.4831L190.032 59.1562L180.379 67.1259L170.975 74.1534C167.807 75.9822 162.362 80.7238 154.64 88.3782C162.85 91.6271 169.858 93.7064 175.662 94.6161L186.94 97.6918L198.565 101.367L203.604 112.838C208.512 122.254 208.737 132.244 204.278 142.808C201.041 150.003 196.057 155.544 189.326 159.43C185.367 161.716 182.282 163.23 180.072 163.974L168.839 166.464L158.899 160.219L149.552 153.632C141.838 148.499 135.755 144.82 131.303 142.597C130.738 149.847 130.684 157.069 131.141 164.261L132.173 175.65L132.115 189.265L122.117 196.635C119.411 199.263 117.266 201.034 115.682 201.948C110.139 205.149 102.931 206.38 94.0592 205.644C84.0994 203.937 75.5601 198.748 68.4412 190.075L61.0264 179.975L64.2499 167.728C66.2335 160.192 67.2254 156.423 67.2254 156.423C69.3397 150.942 71.0428 143.833 72.3346 135.098C62.4708 138.13 55.7572 140.674 52.1938 142.732L41.9994 147.02L30.2712 151.394L19.3909 144.893C19.1603 144.494 17.4459 143.353 14.2477 141.471C11.0496 139.589 8.06671 136.251 5.29914 131.458C3.45409 128.262 2.08764 124.524 1.19978 120.243C-1.49846 110.083 0.354566 100.491 6.75887 91.4676L13.1479 80.5886L26.9517 79.8093L38.6278 79.4595C43.971 79.5703 50.8979 78.7668 59.4086 77.0489C53.9387 68.4892 49.6874 62.9545 46.6546 60.4445L38.9918 51.2869L31.231 40.588L34.4544 28.3408C35.6116 23.9444 37.1973 19.8332 39.2117 16.0071C41.622 11.9524 45.7966 8.21063 51.7357 4.78171C60.4463 -0.247365 70.1275 -1.30951 80.7791 1.59528L92.9972 4.92723L98.3824 16.9977L102.482 28.2127C106.137 37.2873 108.92 43.9361 110.83 48.1594C117.3 40.1632 121.542 34.252 123.556 30.426C124.448 28.3132 126.297 25.1152 129.103 20.8319L137.274 8.92422L149.89 8.83068Z"
      fill="url(#paint0_radial_31_86)"
    />
    <defs>
      <radialGradient
        id="paint0_radial_31_86"
        cx="0"
        cy="0"
        r="1"
        gradientUnits="userSpaceOnUse"
        gradientTransform="translate(102.714 92.3925) rotate(-58.8557) scale(141.771 138.313)"
      >
        <stop stop-color="#5242F5" />
        <stop offset="0.243298" stop-color="#1FA1FD" />
        <stop offset="0.563865" stop-color="#D086FF" />
        <stop offset="0.77483" stop-color="#FD5538" />
      </radialGradient>
    </defs>
  </svg>
);
function BigFlower({ breakTaken }) {
  const flowerRef = useRef(null);
  useGSAP(
    () => {
      gsap.to(flowerRef.current, {
        rotation: -360,
        transformOrigin: "50% 50%",
        repeat: -1,
        duration: 60,
        ease: "linear",
      });
    },
    { scope: flowerRef },
  );
  useGSAP(
    () => {
      if (!breakTaken) {
        // Reset original colors
        gsap.to("#paint0_radial_31_86 stop", {
          stopColor: (i) => ["#5242F5", "#1FA1FD", "#D086FF", "#FD5538"][i],
          duration: 0.6,
        });
        return;
      }

      // Animate to a new palette
      gsap.to("#paint0_radial_31_86 stop", {
        stopColor: (i) => ["#00FFA3", "#00C2FF", "#FF7AE0", "#FF3B3B"][i],
        duration: 0.8,
        ease: "power2.out",
      });
    },
    { dependencies: [breakTaken] },
  );
  return <div ref={flowerRef}>{flowerSVG}</div>;
}

export default BigFlower;
